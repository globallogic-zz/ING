<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>Login Tests</title>

        <!-- Unit Testing framework -->
        <link rel="stylesheet" type="text/css" href="qunit/qunit.css" media="screen" charset="utf-8" />
        <script type="text/javascript" src="qunit/qunit.js"></script>

        <!-- JavaScript file to test -->
        <script type="text/javascript" src="../javascripts/validations.js"></script>

        <!-- jQuery library -->
        <script type="text/javascript" src="../javascripts/jquery/jquery-1.7.2.min.js"></script>

        <!-- Unit Tests -->
        <script type="text/javascript" language="javascript">
            // Test data
            var blankId = "";
            var invalidId = "!@#$%^&*()";
            var Id = "ABC123";

            // Create User Test Module
            module("User Login", {
                setup: function () {
                    // runs before each test in this module
                    $('#qunit-fixture').append('<input type="text" id="txtIdNumber" />');
                    $('#qunit-fixture').append('<input type="button" id="btnSubmit" value="Login" onclick="javascript: return IsValidIDNumber();" />');

                    $('#qunit-fixture').append('<div id="divMessage"></div>');
                },
                teardown: function () {
                    // runs after each test
                }
            });

            // Test whether a validation message is shown when ID Number is not entered
            test("Validation message is shown when ID Number is not entered i.e blank", function () {
                expect(1);

                // Input ID Number
                $('#txtIdNumber').val(blankId);

                // Trigger onClick event of submit button to execute validations
                $('#btnSubmit').trigger('click');

                var isValid = $('#divMessage').val().indexOf("ID Number is required") != -1 ? true : false;
                ok(isValid, "'ID Number is required' error to be displayed.");
            });

            // Test whether a validation message is shown when invalid ID Number is provided
            test("Validation message is shown when ID Number doesn't contain alphanumeric", function () {
                expect(1);

                // Input ID Number
                $('#txtIdNumber').val(invalidId);

                // Trigger onClick event of submit button to execute validations
                $('#btnSubmit').trigger('click');

                var isValid = $('#divMessage').val().indexOf("ID Number should contain alphanumeric only") != -1 ? true : false;
                ok(isValid, "'ID Number should contain alphanumeric only' error message to be displayed");
            });

            // Test whether a validation is not shown when valid ID Number is provided
            test("No validation message shown when valid ID Number is provided", function () {
                expect(1);

                // Input ID Number
                $('#txtIdNumber').val(Id);

                // Trigger onClick event of submit button to execute validations
                $('#btnSubmit').trigger('click');

                var isValid = $('#divMessage').val().indexOf("") != -1 ? true : false;
                ok(isValid, "Valid ID Number is entered");
            });
        </script>
    </head>
    <body>
        <h1 id="qunit-header">
            Login Unit Tests</h1>
        <h2 id="qunit-banner">
        </h2>
        <div id="qunit-testrunner-toolbar">
        </div>
        <h2 id="qunit-userAgent">
        </h2>
        <ol id="qunit-tests">
        </ol>
        <div id="qunit-fixture">
        </div>
    </body>
</html>
